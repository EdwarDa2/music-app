<ng-container *ngIf="{
  track: (currentTrack$ | async),
  isPlaying: (isPlaying$ | async),
  currentTime: (currentTime$ | async),
  duration: (duration$ | async)
} as state">

  <div class="player-header">
    <h1>{{ state.track?.song_name || 'Reproductor Local' }}</h1>
    <div class="header-actions">
      <button class="icon-btn">â‹¯</button>
    </div>
  </div>
  <div class="tabs">
    <div class="tab active">MÃºsica Local</div>
  </div>

  <div class="player-content">
    
    <div class="album-section">
      <div class="album-art">
        <img [src]="state.track?.caratula || 'assets/img/default-cover.png'" alt="Portada">
      </div>
    </div>
    
    <div class="song-info-section">
      
      <div class="song-info">
        <h2 class="song-title">{{ state.track?.song_name || 'Elige una canciÃ³n' }}</h2>
        <p class="song-artist">{{ state.track?.artist_name || '...' }}</p>
      </div>
      
      <div class="progress-area">
        <input 
          type="range" 
          class="progress-bar"
          [value]="state.currentTime || 0"
          [max]="state.duration || 100"
          (input)="onSeek($event)"> 
        <div class="time">
          <span>{{ formatTime(state.currentTime) }}</span>
          <span>{{ formatTime(state.duration) }}</span>
        </div>
      </div>
      
      <div class="controls">
        <div class="control-btn shuffle"><i>ğŸ”€</i></div>
        
        <div class="control-btn" (click)="onPrevious()">
          <i>â®</i>
        </div>
        
        <div class="control-btn play-pause" (click)="onPlayPause(state.isPlaying)">
          <i *ngIf="!state.isPlaying">â–¶ï¸</i>
          <i *ngIf="state.isPlaying">â¸ï¸</i>
        </div>
        
        <div class="control-btn" (click)="onNext()">
          <i>â­</i>
        </div>

        <div class="control-btn repeat"><i>ğŸ”</i></div>
      </div>
    </div>
  </div>

</ng-container>